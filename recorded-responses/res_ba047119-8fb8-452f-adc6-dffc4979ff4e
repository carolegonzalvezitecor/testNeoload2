(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"12/M":function(t,e,i){"use strict";i.d(e,"a",(function(){return D}));var n=i("mrSG"),c=i("fXoL"),a=i("3Pt+"),o=i("+nbM"),r=i("I+dG"),s=i("1ATV"),b=i("1kSV"),l=i("8oAO"),u=i("2u78"),d=i("tyNb"),h=i("6CRC"),m=i("ofXK"),p=i("wG5V");const g=function(t,e){return{startDate:t,endDate:e}};function f(t,e){if(1&t&&(c.Vb(0),c.Xb(1,"h3",6),c.Tc(2),c.Wb(),c.Tb(3,"p",7),c.oc(4,"date"),c.oc(5,"date"),c.Ub()),2&t){const t=c.nc();c.Fb(2),c.Uc(t.data.keyTitle),c.Fb(1),c.vc("innerHTML",t.data.keySubtitle,c.Kc)("params",c.Ac(9,g,c.qc(4,3,t.data.startDate,"dd/MM/yyyy"),c.qc(5,6,t.data.endDate,"dd/MM/yyyy")))}}function v(t,e){if(1&t){const t=c.Yb();c.Vb(0),c.Xb(1,"h3",6),c.Tc(2,"CofaNet.tod.msg.save.title.new"),c.Wb(),c.Xb(3,"p",8),c.Tc(4,"CofaNet.tod.nercer.plausibility.error.new"),c.Wb(),c.Xb(5,"div",9),c.Xb(6,"div",10),c.Xb(7,"button",11),c.jc("click",(function(){return c.Jc(t),c.nc().close()})),c.Tc(8,"CofaNet.global.cancel.new"),c.Wb(),c.Xb(9,"button",12),c.jc("click",(function(){c.Jc(t);const e=c.nc();return e.submit(),e.saveAnywayClicked=!0})),c.Tc(10," CofaNet.tod.nercer.button.saveAnyway.new "),c.Wb(),c.Wb(),c.Wb(),c.Ub()}if(2&t){const t=c.nc();c.Fb(9),c.vc("disabled",t.saveAnywayClicked)}}const y=function(t){return{status:t}};function W(t,e){if(1&t&&(c.Vb(0),c.Xb(1,"h3",6),c.Tc(2,"CofaNet.tod.msg.save.title"),c.Wb(),c.Xb(3,"p",13),c.oc(4,"translate"),c.Tc(5,"CofaNet.tod.itod.msg.success"),c.Wb(),c.Ub()),2&t){const t=c.nc();c.Fb(3),c.vc("params",c.zc(4,y,c.qc(4,1,"CofaNet.tod.status.SAVED",t.lang)))}}function T(t,e){if(1&t){const t=c.Yb();c.Vb(0),c.Xb(1,"h3",14),c.Tc(2,"CofaNet.overdues.currency.change"),c.Wb(),c.Xb(3,"cad-select",15),c.jc("itemChange",(function(e){return c.Jc(t),c.nc().getSelectedCurrency(e)})),c.Wb(),c.Ub()}if(2&t){const t=c.nc();c.Fb(3),c.vc("options",t.currencies)("search",!0)("form",t.form)}}function C(t,e){if(1&t){const t=c.Yb();c.Vb(0),c.Xb(1,"h3",16),c.Tc(2,"CofaNet.tod.nercer.confirm.cancelPopup.text"),c.Wb(),c.Xb(3,"div",9),c.Xb(4,"div",10),c.Xb(5,"button",11),c.jc("click",(function(){return c.Jc(t),c.nc().close()})),c.Tc(6,"CofaNet.global.no"),c.Wb(),c.Xb(7,"button",17),c.jc("click",(function(){return c.Jc(t),c.nc().cancelDeclaration()})),c.Tc(8,"CofaNet.global.yes"),c.Wb(),c.Wb(),c.Wb(),c.Ub()}}function X(t,e){if(1&t){const t=c.Yb();c.Vb(0),c.Xb(1,"h3",16),c.Tc(2,"CofaNet.notifications.filter.category.WARNING"),c.Wb(),c.Xb(3,"p",8),c.Tc(4,"CofaNet.tod.contractmigration.notification.message"),c.Wb(),c.Xb(5,"div",18),c.Xb(6,"div",19),c.Xb(7,"label",20),c.Tc(8,"CofaNet.onboarding.watch.hidden "),c.Xb(9,"input",21),c.jc("ngModelChange",(function(e){return c.Jc(t),c.nc().isHide=e})),c.Wb(),c.Tb(10,"span",22),c.Wb(),c.Wb(),c.Xb(11,"div",23),c.Xb(12,"button",17),c.jc("click",(function(){return c.Jc(t),c.nc().close()})),c.Tc(13,"CofaNet.onboarding.watch.validate"),c.Wb(),c.Wb(),c.Wb(),c.Ub()}if(2&t){const t=c.nc();c.Fb(9),c.vc("ngModel",t.isHide)}}function N(t,e){if(1&t){const t=c.Yb();c.Vb(0),c.Xb(1,"h3",6),c.Tc(2,"CofaNet.menu.subscriber.documents"),c.Wb(),c.Xb(3,"p",8),c.Tc(4,"CofaNet.error.message.upload"),c.Wb(),c.Xb(5,"div",9),c.Xb(6,"div",10),c.Xb(7,"button",11),c.jc("click",(function(){return c.Jc(t),c.nc().close()})),c.Tc(8,"CofaNet.global.close"),c.Wb(),c.Wb(),c.Wb(),c.Ub()}}function F(t,e){if(1&t){const t=c.Yb();c.Vb(0),c.Xb(1,"h3",16),c.Tc(2,"CofaNet.notifications.filter.category.WARNING"),c.Wb(),c.Xb(3,"p",8),c.Tc(4,"CofaNet.tod.contractmigration.notification.message.warning"),c.Wb(),c.Xb(5,"div",18),c.Xb(6,"div",19),c.Xb(7,"label",20),c.Tc(8,"CofaNet.onboarding.watch.hidden "),c.Xb(9,"input",21),c.jc("ngModelChange",(function(e){return c.Jc(t),c.nc().isHide=e})),c.Wb(),c.Tb(10,"span",22),c.Wb(),c.Wb(),c.Xb(11,"div",23),c.Xb(12,"button",17),c.jc("click",(function(){return c.Jc(t),c.nc().close()})),c.Tc(13,"CofaNet.onboarding.watch.validate"),c.Wb(),c.Wb(),c.Wb(),c.Ub()}if(2&t){const t=c.nc();c.Fb(9),c.vc("ngModel",t.isHide)}}let D=(()=>{class t{constructor(t,e,i,n,a){this.modal=t,this.analysisService=e,this.invoicingService=i,this.router=n,this.authenticationService=a,this.index=0,this.passCurrency=new c.q,this.passCanceling=new c.q,this.isFirst=!0}ngOnInit(){this.saveAnywayClicked=!1,this.datas?(this.data=this.datas[this.index],this.index++):this.currency?(this.currencies=this.authenticationService.currencies,this.form=new a.j({currency:new a.g("")}),this.form.patchValue({currency:this.currency})):(this.isWarning||this.isWarningWithNotInvoicingTransformContract)&&(this.isHide=!1),setTimeout(()=>{this.visible=!0})}getSelectedCurrency(t){this.passCurrency.emit(t),setTimeout(()=>{this.close()},200)}cancelDeclaration(){this.close(),this.passCanceling.emit(!0)}submit(){this.invoicingService.hPostInvoicing(this.payload.contractId,this.payload.policyHolderId,this.payload.payload).subscribe(t=>{this.toggleAnalysisEvent(),this.visible=!1,this.router.navigate(["declarations/invoicing",this.payload.contractId,this.payload.policyHolderId]),setTimeout(()=>{this.modal.close()},300)},t=>{this.visible=!1,setTimeout(()=>{this.modal.close()},300)})}toggleAnalysisEvent(){const t=new r.c(r.e.Conversion,r.d.turnover,`${o.a.DECLARATION.INVOICING}|${this.companyIdentifier}`);this.analysisService.triggerGtmTagEvent(t)}close(){this.visible=!1,(this.isWarning||this.isWarningWithNotInvoicingTransformContract)&&this.isHide&&localStorage.setItem("boarding-invoicing","true"),this.forcePlausibility||this.isUpdate||this.currency||this.isCancel||this.isWarning||this.isWarningWithNotInvoicingTransformContract||this.alreadyUpload?(this.modal.close(),setTimeout(()=>{this.visible=!1})):this.index<this.datas.length?(this.data=this.datas[this.index],setTimeout(()=>{this.visible=!0}),this.index++):setTimeout(()=>{this.modal.close(),this.visible=!1},300)}}return t.\u0275fac=function(e){return new(e||t)(c.Sb(b.a),c.Sb(l.a),c.Sb(u.a),c.Sb(d.e),c.Sb(h.a))},t.\u0275cmp=c.Mb({type:t,selectors:[["cad-modal-invoicing"]],inputs:{datas:"datas",isUpdate:"isUpdate",isCancel:"isCancel",forcePlausibility:"forcePlausibility",currency:"currency",payload:"payload",declarationId:"declarationId",companyIdentifier:"companyIdentifier",isWarning:"isWarning",alreadyUpload:"alreadyUpload",isWarningWithNotInvoicingTransformContract:"isWarningWithNotInvoicingTransformContract"},outputs:{passCurrency:"passCurrency",passCanceling:"passCanceling"},decls:14,vars:14,consts:[[1,"c-modal"],[1,"c-modal__opac-layer"],[1,"c-modal__content","without-scroll"],[1,"c-modal__close-icon",3,"click"],[1,"las","la-times"],[4,"ngIf"],["l10nTranslate","",1,"c-modal__title"],["l10nTranslate","",1,"c-modal__parag",3,"innerHTML","params"],["l10nTranslate","",1,"c-modal__parag"],[1,"row","u-margin-top-md"],[1,"c-modal__confirm-button-container"],["l10nTranslate","","type","button",1,"c-button","c-button--primary","c-button--cancel-opac",3,"click"],["l10nTranslate","",1,"c-button","c-button--primary","c-button--confirm",3,"disabled","click"],["l10nTranslate","",1,"c-modal__parag",3,"params"],["l10nTranslate","",1,"c-modal__title",2,"margin-bottom","2rem"],["name","currency","bindLabel","currencyCode","bindValue","currencyCode",3,"options","search","form","itemChange"],["l10nTranslate","",1,"c-modal__title",2,"text-align","center"],["l10nTranslate","",1,"c-button","c-button--primary","c-button--confirm",3,"click"],[1,"row","mt-4"],[1,"col-12"],["l10nTranslate","",1,"checkbox-container",2,"text-align","left"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"checkmark"],[1,"mt-3","col-5","offset-4"]],template:function(t,e){1&t&&(c.Xb(0,"div",0),c.Tb(1,"div",1),c.Xb(2,"div",2),c.Xb(3,"button",3),c.jc("click",(function(){return e.close()})),c.oc(4,"translate"),c.Tb(5,"i",4),c.Wb(),c.Rc(6,f,6,12,"ng-container",5),c.Rc(7,v,11,1,"ng-container",5),c.Rc(8,W,6,6,"ng-container",5),c.Rc(9,T,4,3,"ng-container",5),c.Rc(10,C,9,0,"ng-container",5),c.Rc(11,X,14,1,"ng-container",5),c.Rc(12,N,9,0,"ng-container",5),c.Rc(13,F,14,1,"ng-container",5),c.Wb(),c.Wb()),2&t&&(c.Kb("c-modal--visible",e.visible),c.Fb(3),c.Gb("arial-label",c.qc(4,11,"CofaNet.accessibility.iconPopin.close",e.lang)),c.Fb(3),c.vc("ngIf",e.data&&!e.forcePlausibility&&!e.isUpdate&&!e.currency&&!e.isCancel&&!e.isWarning),c.Fb(1),c.vc("ngIf",e.forcePlausibility),c.Fb(1),c.vc("ngIf",e.isUpdate),c.Fb(1),c.vc("ngIf",e.currency),c.Fb(1),c.vc("ngIf",e.isCancel),c.Fb(1),c.vc("ngIf",e.isWarning),c.Fb(1),c.vc("ngIf",e.alreadyUpload),c.Fb(1),c.vc("ngIf",e.isWarningWithNotInvoicingTransformContract))},directives:[m.u,s.q,p.a,a.a,a.r,a.u],pipes:[s.r,m.f],styles:[""]}),Object(n.b)([Object(s.k)(),Object(n.c)("design:type",String)],t.prototype,"lang",void 0),t})()},"2u78":function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i("2Vo4"),c=i("AytR"),a=i("fXoL"),o=i("tk/3");let r=(()=>{class t{constructor(t){this.http=t,this.policyHolder=new n.a("en"),this.isAllContractsView=new n.a(!1)}hGetInvoicing(t,e){return this.http.get(`${c.a.uri}api/restricted/policies/turnover/invoicing/declarations/${t}/${e}`)}hGetInvoicingByPeriod(t,e,i){return this.http.get(`${c.a.uri}api/restricted/policies/turnover/invoicing/declarations/${t}/${e}/blank?`,{params:i})}hGetInvoicingByDeclaration(t,e){return this.http.get(`${c.a.uri}api/restricted/policies/turnover/invoicing/declarations/${t}?`,{params:e})}hGetPolicyHolders(){return this.http.get(c.a.uri+"api/restricted/policies/turnover/invoicing/policy-holders")}hPostInvoicing(t,e,i){return this.http.post(`${c.a.uri}api/restricted/policies/turnover/invoicing/declarations/${t}/${e}`,i)}hPutInvoicing(t,e){return this.http.put(`${c.a.uri}api/restricted/policies/turnover/invoicing/declarations/${t}?`,e)}hPatchInvoicing(t,e){return this.http.patch(`${c.a.uri}api/restricted/policies/turnover/invoicing/declarations-cancel/${t}`,e)}hGetDocumentsParameters(){return this.http.get(c.a.uri+"api/restricted/documents/parameters")}hPostUploadDocument(t){return this.http.post(c.a.uri+"api/restricted/documents",t)}hGetDocuments(t){return this.http.get(c.a.uri+"api/restricted/documents?",{params:t})}hGetInvoicingDetailsByReferenceId(t){return this.http.get(`${c.a.uri}api/restricted/policies/turnover/invoicing/declarations/${t}?declarationInformationOutOfDate=false`)}getSelectedPolicyHolder(){return this.policyHolder.asObservable()}updatePolicyHolder(t){this.policyHolder.next(t)}getContractView(){return this.isAllContractsView.asObservable()}updateContractView(t){this.isAllContractsView.next(t)}}return t.\u0275fac=function(e){return new(e||t)(a.fc(o.b))},t.\u0275prov=a.Ob({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"D+U9":function(t,e,i){"use strict";i.d(e,"a",(function(){return k}));var n=i("mrSG"),c=i("3Pt+"),a=i("LvDl"),o=i.n(a),r=i("1ATV"),s=i("12/M"),b=i("fXoL"),l=i("tyNb"),u=i("dzx2"),d=i("2u78"),h=i("1kSV"),m=i("ADra"),p=i("ofXK"),g=i("1Znx"),f=i("kUwB"),v=i("kjr3"),y=i("5+jj");function W(t,e){if(1&t&&(b.Vb(0),b.Xb(1,"div",33),b.Xb(2,"label",34),b.Tc(3,"CofaNet.document.comments"),b.Wb(),b.Wb(),b.Xb(4,"div",31),b.Tb(5,"textarea",35),b.Wb(),b.Ub()),2&t){const t=b.nc().$implicit;b.Fb(5),b.wc("formControlName",t+"-comment")}}const T=function(t,e){return[t,e]};function C(t,e){if(1&t){const t=b.Yb();b.Xb(0,"div",29),b.Xb(1,"div",18),b.Xb(2,"label",30),b.Tc(3),b.oc(4,"translate"),b.Wb(),b.Wb(),b.Xb(5,"div",31),b.Xb(6,"cof-file-drop",32),b.jc("itemChange",(function(e){return b.Jc(t),b.nc(2).importFile(e)})),b.Wb(),b.Wb(),b.Rc(7,W,6,1,"ng-container",15),b.Wb()}if(2&t){const t=e.$implicit,i=b.nc(2);b.vc("ngBusy",b.Ac(11,T,i.busyCategories,i.busyPromise)),b.Fb(3),b.Vc("",b.qc(4,8,"CVUOCPDocumentCategory."+t,i.lang)," "),b.Fb(3),b.vc("formGroup",i.form)("controlName",t)("multiple",!0)("analyticsUploadType",t)("formatsAllowed","image/jpeg, image/png, image/gif, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document ,application/pdf"),b.Fb(1),b.vc("ngIf",i.getLength(t)&&"TOD"===i.data.businessLine)}}function X(t,e){1&t&&b.Tb(0,"p",36),2&t&&b.vc("innerHTML","CofaNet.global.requiredFields",b.Kc)}function N(t,e){if(1&t){const t=b.Yb();b.Xb(0,"form",16),b.Xb(1,"div",17),b.Xb(2,"div",18),b.Xb(3,"label",19),b.Tc(4,"CofaNet.document.uploadDate"),b.Wb(),b.Wb(),b.Xb(5,"div",20),b.Xb(6,"div",21),b.Tb(7,"cad-date-format",22),b.Wb(),b.Wb(),b.Wb(),b.Xb(8,"div",5),b.Rc(9,C,8,14,"div",23),b.Wb(),b.Xb(10,"div",24),b.Xb(11,"div",25),b.Xb(12,"button",26),b.jc("click",(function(){return b.Jc(t),b.nc().return()})),b.Tc(13,"CofaNet.global.return"),b.Wb(),b.Xb(14,"button",27),b.jc("click",(function(){return b.Jc(t),b.nc().submit()})),b.Tc(15,"CofaNet.global.submit"),b.Wb(),b.Wb(),b.Wb(),b.Rc(16,X,1,1,"p",28),b.Wb()}if(2&t){const t=b.nc();b.vc("formGroup",t.form),b.Fb(7),b.vc("form",t.form),b.Fb(2),b.vc("ngForOf",t.categories),b.Fb(5),b.vc("disabled",!t.isFormValid()||!t.canClick),b.Fb(2),b.vc("ngIf",!t.isFormValid())}}function F(t,e){if(1&t){const t=b.Yb();b.Xb(0,"tr"),b.Xb(1,"td",38),b.Tc(2),b.Wb(),b.Xb(3,"td",38),b.Tc(4),b.Wb(),b.Xb(5,"td",38),b.Tc(6),b.Wb(),b.Xb(7,"td",38),b.Xb(8,"span",39),b.jc("click",(function(){b.Jc(t);const i=e.$implicit;return b.nc(2).downloadDocument(i.objectIdentifier)})),b.Tc(9),b.Wb(),b.Wb(),b.Xb(10,"td",38),b.Tc(11),b.Wb(),b.Xb(12,"td",38),b.Tc(13),b.oc(14,"translate"),b.Wb(),b.Xb(15,"td",38),b.Tc(16),b.oc(17,"translate"),b.Wb(),b.Xb(18,"td",38),b.Tc(19),b.Wb(),b.Xb(20,"td",38),b.Tc(21),b.oc(22,"l10nDate"),b.oc(23,"StringToDate"),b.Wb(),b.Xb(24,"td",38),b.Xb(25,"span",40),b.Tc(26),b.Wb(),b.Wb(),b.Wb()}if(2&t){const t=e.$implicit,i=b.nc(2);b.Fb(2),b.Uc(t.author),b.Fb(2),b.Uc(t.portfolioNumber),b.Fb(2),b.Uc(t.debtorEasyNumber),b.Fb(3),b.Uc(t.name),b.Fb(2),b.Uc(t.externalRefence),b.Fb(2),b.Vc(" ",b.qc(14,10,"CofaNet.document.businessLine."+t.businessLine,i.lang)," "),b.Fb(3),b.Vc(" ",b.qc(17,13,"CVUOCPDocumentCategory."+t.category,i.lang)," "),b.Fb(3),b.Uc(t.format),b.Fb(2),b.Vc(" ",b.rc(22,16,b.pc(23,20,t.creationDate),i.defaultLocale,"shortDate")," "),b.Fb(5),b.Uc(t.status)}}function D(t,e){1&t&&(b.Xb(0,"tr"),b.Xb(1,"td",41),b.Tc(2," CofaNet.document.emptyList"),b.Wb(),b.Wb())}function I(t,e){if(1&t&&(b.Xb(0,"tbody"),b.Rc(1,F,27,22,"tr",37),b.Rc(2,D,3,0,"tr",15),b.Wb()),2&t){const t=b.nc();b.Fb(1),b.vc("ngForOf",t.documents),b.Fb(1),b.vc("ngIf",t.documents&&0===t.documents.length)}}let k=(()=>{class t{constructor(t,e,i,n,c,a){this.router=t,this.apiService=e,this.invoicingService=i,this.activatedRoute=n,this.modalService=c,this.antiLodash=a,this.canClick=!0,this.fileCategories=[]}ngOnInit(){"invoicing"===this.getRouterVariable(2)?this.initInvoicing():"itod"===this.getRouterVariable(2)?this.initItod():"CLAIMS"===this.getRouterVariable(2)&&this.initClaims(),this.loadCategories(),this.loadAlfrescoDocuments()}initInvoicing(){this.data={businessLine:this.getRouterVariable(4),debtorEasyNumber:this.getRouterVariable(6),externalReference:this.getRouterVariable(5)}}initItod(){this.data={businessLine:"TOD",debtorEasyNumber:this.getRouterVariable(4),externalReference:this.getRouterVariable(5)}}initClaims(){this.data={businessLine:"CLAIMS",debtorEasyNumber:this.activatedRoute.snapshot.paramMap.get("easyNumber"),externalReference:this.activatedRoute.snapshot.paramMap.get("claimCaseIdentifier")}}loadCategories(){this.busyCategories=this.invoicingService.hGetDocumentsParameters().subscribe(t=>{this.parameters=t;const e=o.a.filter(this.parameters.documentCategories,{businessLine:this.data.businessLine})[0];this.categories=e.categories,this.listenerCategories(this.categories);const i={};o.a.each(this.categories,t=>{i[t]=new c.g([]),"TOD"===this.data.businessLine&&(i[t+"-comment"]=new c.g("",c.F.required))}),this.initForm(i)})}initForm(t){this.form=new c.j(o.a.mergeWith(t,{currentDate:new c.g(this.apiService.formatDateToObject(this.apiService.getDateToday()))}))}listenerCategories(t){o.a.each(t,t=>{this.fileCategories[t]=[]})}importFile(t){const e=[];this.fileCategories[t.name]=[],o.a.each(t.data,t=>{1===o.a.filter(e,{name:t.name,lastModified:t.lastModified,size:t.size,type:t.type}).length||1===o.a.filter(e,{name:t.name,lastModifiedDate:t.lastModifiedDate,size:t.size,type:t.type}).length||(this.checkFileInCategories(t)?this.modalService.open(s.a).componentInstance.alreadyUpload=!0:e.push(t))}),this.fileCategories[t.name]=e,this.form.get(t.name).setValue(e)}checkFileInCategories(t){let e=!1;return o.a.each(this.categories,i=>{(o.a.filter(this.fileCategories[i],{name:t.name,lastModified:t.lastModified,size:t.size,type:t.type}).length>0||o.a.filter(this.fileCategories[i],{name:t.name,lastModifiedDate:t.lastModifiedDate,size:t.size,type:t.type}).length>0)&&(e=!0)}),e}getLength(t){return this.form.controls[t].value.length}isFormValid(){let t=!0,e=0;return o.a.each(this.categories,i=>{e+=this.getLength(i),"TOD"===this.data.businessLine&&this.getLength(i)>0&&(t=""!==this.form.controls[i+"-comment"].value)}),0!==e&&t}return(){"CLAIMS"!==this.data.businessLine?this.router.navigate([`${this.getRouterVariable(1)}/${this.getRouterVariable(2)}`]):(this.apiService.companyDetailsTabs="overdue",this.router.navigate(["company",this.data.debtorEasyNumber]))}submit(){this.canClick=!1,this.uploadDocument(0)}uploadDocumentSynchronous(t,e){this.busyPromise=this.invoicingService.hPostUploadDocument(this.prepareFormData(this.categories[t],e)).toPromise(),this.busyPromise.then(e=>{this.loadDocumentsSynchronous().then(e=>{this.documents=e.documents,t++,this.uploadDocument(t)})}).catch(t=>{this.canClick=!0,this.loadCategories(),this.loadAlfrescoDocuments()})}uploadDocument(t){if(t<this.categories.length)if(this.getLength(this.categories[t])>0){const e=this.form.controls[this.categories[t]].value;("CLAIMS"===this.data.businessLine||"CLAIMS"!==this.data.businessLine&&""!==this.form.controls[this.categories[t]+"-comment"].value)&&this.uploadDocumentSynchronous(t,e)}else t++,this.uploadDocument(t);else this.canClick=!0,this.loadCategories()}prepareFormData(t,e){const i=new FormData,n="CLAIMS"===this.data.businessLine?"":this.form.controls[t+"-comment"].value;return i.append("businessLine",this.data.businessLine),i.append("category",t),i.append("comment",n),i.append("debtorEasyNumber",this.data.debtorEasyNumber),o.a.each(e,t=>{i.append("documents",t)}),i.append("externalReference",this.data.externalReference),i}sortDocuments(t){this.predicate===t?this.reverse=!this.reverse:(this.predicate=t,this.reverse=!0),this.documents.length>0&&(this.documents=this.antiLodash.orderBy(this.documents,this.predicate,this.reverse?"asc":"desc"))}loadAlfrescoDocuments(){this.documents=[],this.busyList=this.invoicingService.hGetDocuments(this.data).subscribe(t=>{this.documents=t.documents})}getRouterVariable(t){return this.router.url.split("/")[t]}loadDocumentsSynchronous(){return this.documents=[],this.busyPromise=this.invoicingService.hGetDocuments(this.data).toPromise()}downloadDocument(t){this.apiService.downloadFile("/restricted/documents/"+t)}}return t.\u0275fac=function(e){return new(e||t)(b.Sb(l.e),b.Sb(u.a),b.Sb(d.a),b.Sb(l.a),b.Sb(h.g),b.Sb(m.a))},t.\u0275cmp=b.Mb({type:t,selectors:[["cad-upload-invoicing"]],decls:83,vars:46,consts:[[1,"documents-container"],[1,"c-nav-page-subtitle"],["l10nTranslate","",1,"c-nav-page-subtitle__subtitle"],["l10nTranslate","",1,"c-text","c-text--primary-light","u-margin-top-lg","u-margin-bottom-md"],[3,"formGroup",4,"ngIf"],[1,"d-relative"],[3,"ngBusy"],[1,"c-table","c-table--odd-highlight"],["scope","col",1,"c-table__header-highlighted-1","cursor",3,"click"],[1,"c-table__header-cell"],["l10nTranslate","",1,"c-table__header-cell-content"],[1,"c-table__caret-container"],[1,"las","la-caret-up"],[1,"las","la-caret-down"],["scope","col",1,"cursor",3,"click"],[4,"ngIf"],[3,"formGroup"],[1,"row","u-form-margin-top"],[1,"col-2","align-self-center"],["for","currentDate","l10nTranslate","",1,"u-label-required"],[1,"col-4","disabledDiv"],[1,"input-date"],["name","currentDate",3,"form"],["class","row u-form-margin-top",3,"ngBusy",4,"ngFor","ngForOf"],[1,"row","u-margin-top-sm"],[1,"col-12","mt-5","mb-5","btn-cont"],["l10nTranslate","","type","button",1,"c-button","c-button--primary","c-button--return-opac",3,"click"],["l10nTranslate","",1,"c-button","c-button--primary","c-button--confirm",3,"disabled","click"],["l10nTranslate","",3,"innerHTML",4,"ngIf"],[1,"row","u-form-margin-top",3,"ngBusy"],["for","documents","l10nTranslate",""],[1,"col-4"],[3,"formGroup","controlName","multiple","analyticsUploadType","formatsAllowed","itemChange"],[1,"col-1","align-self-center"],["for","documents","l10nTranslate","",1,"u-label-required"],["maxlength","500",2,"height","100%",3,"formControlName"],["l10nTranslate","",3,"innerHTML"],[4,"ngFor","ngForOf"],[1,"c-table__text-ceil","c-table__text-ceil--large-padding-top"],["l10nTranslate","",1,"name",3,"click"],["l10nTranslate",""],["colspan","11","l10nTranslate","",1,"c-table__text-ceil","align-middle","text-center"]],template:function(t,e){1&t&&(b.Xb(0,"div",0),b.Xb(1,"div",1),b.Xb(2,"h3",2),b.Tc(3,"CofaNet.menu.subscriber.documents"),b.Wb(),b.Wb(),b.Xb(4,"p",3),b.Tc(5,"CofaNet.document.upload.title"),b.Wb(),b.Rc(6,N,17,5,"form",4),b.Xb(7,"div",5),b.Xb(8,"div",6),b.Xb(9,"table",7),b.Xb(10,"thead"),b.Xb(11,"tr"),b.Xb(12,"th",8),b.jc("click",(function(){return e.sortDocuments("creator")})),b.Xb(13,"div",9),b.Xb(14,"div",10),b.Tc(15,"CofaNet.document.creator"),b.Wb(),b.Xb(16,"div",11),b.Tb(17,"i",12),b.Tb(18,"i",13),b.Wb(),b.Wb(),b.Wb(),b.Xb(19,"th",14),b.jc("click",(function(){return e.sortDocuments("portfolioNumber")})),b.Xb(20,"div",9),b.Xb(21,"div",10),b.Tc(22,"CofaNet.contract.portfolioNumber"),b.Wb(),b.Xb(23,"div",11),b.Tb(24,"i",12),b.Tb(25,"i",13),b.Wb(),b.Wb(),b.Wb(),b.Xb(26,"th",14),b.jc("click",(function(){return e.sortDocuments("debtorEasyNumber")})),b.Xb(27,"div",9),b.Xb(28,"div",10),b.Tc(29,"CofaNet.company.EASYnumber"),b.Wb(),b.Xb(30,"div",11),b.Tb(31,"i",12),b.Tb(32,"i",13),b.Wb(),b.Wb(),b.Wb(),b.Xb(33,"th",8),b.jc("click",(function(){return e.sortDocuments("name")})),b.Xb(34,"div",9),b.Xb(35,"div",10),b.Tc(36,"CofaNet.document.name"),b.Wb(),b.Xb(37,"div",11),b.Tb(38,"i",12),b.Tb(39,"i",13),b.Wb(),b.Wb(),b.Wb(),b.Xb(40,"th",8),b.jc("click",(function(){return e.sortDocuments("externalRefence")})),b.Xb(41,"div",9),b.Xb(42,"div",10),b.Tc(43,"CofaNet.document.fileID"),b.Wb(),b.Xb(44,"div",11),b.Tb(45,"i",12),b.Tb(46,"i",13),b.Wb(),b.Wb(),b.Wb(),b.Xb(47,"th",8),b.jc("click",(function(){return e.sortDocuments("businessLine")})),b.Xb(48,"div",9),b.Xb(49,"div",10),b.Tc(50,"CofaNet.document.businessLine"),b.Wb(),b.Xb(51,"div",11),b.Tb(52,"i",12),b.Tb(53,"i",13),b.Wb(),b.Wb(),b.Wb(),b.Xb(54,"th",8),b.jc("click",(function(){return e.sortDocuments("category")})),b.Xb(55,"div",9),b.Xb(56,"div",10),b.Tc(57,"CofaNet.document.category"),b.Wb(),b.Xb(58,"div",11),b.Tb(59,"i",12),b.Tb(60,"i",13),b.Wb(),b.Wb(),b.Wb(),b.Xb(61,"th",8),b.jc("click",(function(){return e.sortDocuments("format")})),b.Xb(62,"div",9),b.Xb(63,"div",10),b.Tc(64,"CofaNet.document.format"),b.Wb(),b.Xb(65,"div",11),b.Tb(66,"i",12),b.Tb(67,"i",13),b.Wb(),b.Wb(),b.Wb(),b.Xb(68,"th",8),b.jc("click",(function(){return e.sortDocuments("uploadDate")})),b.Xb(69,"div",9),b.Xb(70,"div",10),b.Tc(71,"CofaNet.document.uploadDate"),b.Wb(),b.Xb(72,"div",11),b.Tb(73,"i",12),b.Tb(74,"i",13),b.Wb(),b.Wb(),b.Wb(),b.Xb(75,"th",8),b.jc("click",(function(){return e.sortDocuments("status")})),b.Xb(76,"div",9),b.Xb(77,"div",10),b.Tc(78,"CofaNet.document.status"),b.Wb(),b.Xb(79,"div",11),b.Tb(80,"i",12),b.Tb(81,"i",13),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Rc(82,I,3,2,"tbody",15),b.Wb(),b.Wb(),b.Wb(),b.Wb()),2&t&&(b.Fb(6),b.vc("ngIf",e.form),b.Fb(2),b.vc("ngBusy",b.Ac(43,T,e.busyList,e.busyPromise)),b.Fb(9),b.Kb("active","creator"===e.predicate&&e.reverse),b.Fb(1),b.Kb("active","creator"===e.predicate&&!e.reverse),b.Fb(6),b.Kb("active","portfolioNumber"===e.predicate&&e.reverse),b.Fb(1),b.Kb("active","portfolioNumber"===e.predicate&&!e.reverse),b.Fb(6),b.Kb("active","debtorEasyNumber"===e.predicate&&e.reverse),b.Fb(1),b.Kb("active","debtorEasyNumber"===e.predicate&&!e.reverse),b.Fb(6),b.Kb("active","name"===e.predicate&&e.reverse),b.Fb(1),b.Kb("active","name"===e.predicate&&!e.reverse),b.Fb(6),b.Kb("active","externalRefence"===e.predicate&&e.reverse),b.Fb(1),b.Kb("active","externalRefence"===e.predicate&&!e.reverse),b.Fb(6),b.Kb("active","businessLine"===e.predicate&&e.reverse),b.Fb(1),b.Kb("active","businessLine"===e.predicate&&!e.reverse),b.Fb(6),b.Kb("active","category"===e.predicate&&e.reverse),b.Fb(1),b.Kb("active","category"===e.predicate&&!e.reverse),b.Fb(6),b.Kb("active","format"===e.predicate&&e.reverse),b.Fb(1),b.Kb("active","format"===e.predicate&&!e.reverse),b.Fb(6),b.Kb("active","uploadDate"===e.predicate&&e.reverse),b.Fb(1),b.Kb("active","uploadDate"===e.predicate&&!e.reverse),b.Fb(6),b.Kb("active","status"===e.predicate&&e.reverse),b.Fb(1),b.Kb("active","status"===e.predicate&&!e.reverse),b.Fb(1),b.vc("ngIf",e.documents))},directives:[r.q,p.u,g.c,c.H,c.s,c.k,f.a,p.t,v.a,c.c,c.n,c.r,c.i],pipes:[r.r,r.e,y.a],styles:[".disabledDiv[_ngcontent-%COMP%]{pointer-events:none;opacity:.4}.btn-cont[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center}.c-table__text-ceil[_ngcontent-%COMP%]{cursor:default}.c-table__text-ceil[_ngcontent-%COMP%]:hover   .name[_ngcontent-%COMP%]{cursor:pointer;text-decoration:underline}.documents-container[_ngcontent-%COMP%]{padding:3rem 3rem 0}"]}),Object(n.b)([Object(r.a)(),Object(n.c)("design:type",String)],t.prototype,"defaultLocale",void 0),Object(n.b)([Object(r.k)(),Object(n.c)("design:type",String)],t.prototype,"lang",void 0),t})()},kAuD:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i("LvDl"),c=i.n(n),a=i("fXoL");let o=(()=>{class t{constructor(t){this.el=t,this.wasInside=!1}clickInside(){"0"===this.el.nativeElement.value&&(this.el.nativeElement.value=""),this.wasInside=!0}clickout(){this.wasInside||""===this.el.nativeElement.value&&(this.el.nativeElement.value="0"),this.wasInside=!1}onInputChange(t){const e=this.el.nativeElement.value;if(c.a.isUndefined(e))return"";this.el.nativeElement.value=this.transformNumberInDecimal(e),e!==this.el.nativeElement.value&&t.stopPropagation()}transformNumberInDecimal(t){let e=String(t).replace(",",".").replace(/[^0-9.]/g,"");if("."===e[0]&&(e="0"+e),/^\d+([.,]{1}\d{0,2})?$/.test(e)||""===t||isNaN(Number(e))){if(isNaN(Number(e))){const t=String(e).length;/\.$/.test(String(e))&&String(e).match(/\./g).length>1&&(e=String(e).substring(0,t-1)),e=String(e).replace(/[.](?![\d]{0,2}$)/g,"")}}else 0!==Number(e)&&(c.a.startsWith(e,".")||(e=Number(Math.floor(Number(e+"e2"))+"e-2").toString())),0===Number(e)&&(e="");return e.replace(/^0+(?=\d)/,"")}}return t.\u0275fac=function(e){return new(e||t)(a.Sb(a.o))},t.\u0275dir=a.Nb({type:t,selectors:[["","decimal",""]],hostBindings:function(t,e){1&t&&a.jc("click",(function(){return e.clickInside()}))("click",(function(){return e.clickout()}),!1,a.Hc)("input",(function(t){return e.onInputChange(t)}))}}),t})()}}]);