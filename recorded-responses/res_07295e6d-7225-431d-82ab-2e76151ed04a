(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"0HIY":function(e,t,o){"use strict";o.d(t,"a",(function(){return G}));var a=o("mrSG"),i=o("fXoL"),n=o("3Pt+"),r=o("LvDl"),c=o.n(r),s=o("cp0P"),l=o("I+dG"),d=o("1ATV"),u=o("+nbM"),p=o("Vm3A"),b=o("6CRC"),f=o("dzx2"),m=o("tanD"),h=o("8oAO"),g=o("1Znx"),v=o("ofXK"),y=o("wG5V"),C=o("OTRh"),T=o("kUwB");const N=["childDeliveryTypeCodes"],F=["childDebtorIsoCountryCodes"],_=["childFunctionalStatuses"];function I(e,t){if(1&e){const e=i.Yb();i.Xb(0,"div",3),i.Xb(1,"button",4),i.jc("click",(function(){return i.Jc(e),i.nc().displayFilter("company")})),i.oc(2,"translate"),i.Tc(3," CofaNet.company.company "),i.Wb(),i.Xb(4,"button",4),i.jc("click",(function(){return i.Jc(e),i.nc().displayFilter("product")})),i.oc(5,"translate"),i.Tc(6," CofaNet.product.product "),i.Wb(),i.Xb(7,"button",4),i.jc("click",(function(){return i.Jc(e),i.nc().displayFilter("customizedFields")})),i.oc(8,"translate"),i.Tc(9," CofaNet.company.customizedFields "),i.Wb(),i.Wb()}if(2&e){const e=i.nc();i.Fb(1),i.Kb("c-button--navigation-tab-active",e.displayForm&&"company"===e.type),i.Gb("aria-label",i.qc(2,9,"CofaNet.accessibility.dropdownButton.company",e.lang)),i.Fb(3),i.Kb("c-button--navigation-tab-active",e.displayForm&&"product"===e.type),i.Gb("aria-label",i.qc(5,12,"CofaNet.accessibility.dropdownButton.product",e.lang)),i.Fb(3),i.Kb("c-button--navigation-tab-active",e.displayForm&&"customizedFields"===e.type),i.Gb("aria-label",i.qc(8,15,"CofaNet.accessibility.dropdownButton.customizedFields",e.lang))}}function X(e,t){1&e&&(i.Xb(0,"div",9),i.Xb(1,"label",54),i.Tc(2,"CofaNet.company.CRSnumber"),i.Wb(),i.Wb())}function k(e,t){if(1&e){const e=i.Yb();i.Xb(0,"div",21),i.Xb(1,"input",55),i.jc("keydown",(function(){return i.Jc(e),i.nc(3).disabledFieldSearch("crsNumber")})),i.Wb(),i.Wb()}}function D(e,t){1&e&&(i.Xb(0,"div",9),i.Xb(1,"label",56),i.Tc(2,"CofaNet.company.legalIdentifier"),i.Wb(),i.Wb())}function W(e,t){if(1&e){const e=i.Yb();i.Xb(0,"div",21),i.Xb(1,"cad-select",57),i.jc("itemChange",(function(t){return i.Jc(e),i.nc(3).getInputMask(t)})),i.Wb(),i.Wb()}if(2&e){const e=i.nc(3);i.Fb(1),i.vc("form",e.form)("options",e.legalIds)}}function w(e,t){if(1&e){const e=i.Yb();i.Xb(0,"div",21),i.Xb(1,"input",58),i.jc("keydown",(function(){return i.Jc(e),i.nc(3).disabledFieldSearch("legalValue")})),i.Wb(),i.Wb()}}function P(e,t){if(1&e){const e=i.Yb();i.Xb(0,"div",7),i.Xb(1,"div",8),i.Xb(2,"div",9),i.Xb(3,"label",10),i.Tc(4,"CofaNet.company.companyName"),i.Wb(),i.Wb(),i.Xb(5,"div",21),i.Tb(6,"input",46),i.Wb(),i.Xb(7,"div",9),i.Xb(8,"label",47),i.Tc(9,"CofaNet.company.EASYnumber"),i.Wb(),i.Wb(),i.Xb(10,"div",21),i.Xb(11,"input",48),i.jc("keydown",(function(){return i.Jc(e),i.nc(2).disabledFieldSearch("easyNumber")})),i.Wb(),i.Wb(),i.Wb(),i.Xb(12,"div",19),i.Tb(13,"div",9),i.Xb(14,"div",21),i.Xb(15,"label",15),i.Tc(16,"CofaNet.global.search.favorite "),i.Tb(17,"input",49),i.Tb(18,"span",17),i.Wb(),i.Wb(),i.Rc(19,X,3,0,"div",50),i.Rc(20,k,2,0,"div",51),i.Wb(),i.Xb(21,"div",19),i.Xb(22,"div",9),i.Xb(23,"label",28),i.Tc(24,"CofaNet.company.country"),i.Wb(),i.Wb(),i.Xb(25,"div",21),i.Xb(26,"cad-select",52,53),i.jc("itemChange",(function(t){return i.Jc(e),i.nc(2).getLegalIds(t)})),i.oc(28,"translate"),i.Wb(),i.Wb(),i.Rc(29,D,3,0,"div",50),i.Rc(30,W,2,2,"div",51),i.Rc(31,w,2,0,"div",51),i.Wb(),i.Wb()}if(2&e){const e=i.nc(2);i.Fb(19),i.vc("ngIf",e.user.preferences.displayCRS),i.Fb(1),i.vc("ngIf",e.user.preferences.displayCRS),i.Fb(6),i.wc("placeholder",i.qc(28,9,"CofaNet.filter.countries",e.lang)),i.vc("form",e.form)("options",e.countries)("search",!0),i.Fb(3),i.vc("ngIf",e.legalIds&&e.legalIds.length>0),i.Fb(1),i.vc("ngIf",e.legalIds&&e.legalIds.length>0),i.Fb(1),i.vc("ngIf",e.legalIds&&e.legalIds.length>0)}}function A(e,t){1&e&&(i.Xb(0,"div",40),i.Xb(1,"label",59),i.Tc(2,"CofaNet.product.decision.clauses.NONCANCELLABLE "),i.Tb(3,"input",60),i.Tb(4,"span",17),i.Wb(),i.Wb())}function O(e,t){1&e&&i.Tb(0,"input",69)}function x(e,t){1&e&&i.Tb(0,"input",70)}function M(e,t){if(1&e&&(i.Xb(0,"div",66),i.Rc(1,O,1,0,"input",67),i.Rc(2,x,1,0,"input",68),i.Wb()),2&e){const e=i.nc(3);i.Fb(1),i.vc("ngIf","COMPANYREF"==e.form.value.customizedFields.code),i.Fb(1),i.vc("ngIf","COMPANYREF"!=e.form.value.customizedFields.code)}}function S(e,t){if(1&e&&(i.Xb(0,"div",21),i.Xb(1,"div",71),i.Tb(2,"cad-date-format",72),i.Wb(),i.Wb()),2&e){const e=i.nc(3);i.Fb(2),i.vc("form",e.form)}}function R(e,t){if(1&e&&(i.Xb(0,"div",21),i.Xb(1,"div",22),i.Tb(2,"input",73),i.Xb(3,"div",24),i.Tc(4),i.Wb(),i.Wb(),i.Wb()),2&e){const e=i.nc(3);i.Fb(4),i.Uc(e.currency)}}function V(e,t){1&e&&(i.Xb(0,"div",25),i.Tb(1,"i",26),i.Wb())}function E(e,t){if(1&e&&(i.Xb(0,"div",21),i.Xb(1,"div",71),i.Tb(2,"cad-date-format",74),i.Wb(),i.Wb()),2&e){const e=i.nc(3);i.Fb(2),i.vc("form",e.form)}}function L(e,t){if(1&e&&(i.Xb(0,"div",21),i.Xb(1,"div",22),i.Tb(2,"input",75),i.Xb(3,"div",24),i.Tc(4),i.Wb(),i.Wb(),i.Wb()),2&e){const e=i.nc(3);i.Fb(4),i.Uc(e.currency)}}function z(e,t){if(1&e){const e=i.Yb();i.Xb(0,"div",7),i.Xb(1,"div",8),i.Xb(2,"div",9),i.Xb(3,"label",61),i.Tc(4,"CofaNet.company.customizedFields"),i.Wb(),i.Wb(),i.Xb(5,"div",62),i.Xb(6,"cad-select",63),i.jc("itemChange",(function(t){return i.Jc(e),i.nc(2).setCustomizedFields(t)})),i.oc(7,"translate"),i.Wb(),i.Wb(),i.Rc(8,M,3,2,"div",64),i.Rc(9,S,3,1,"div",51),i.Rc(10,R,5,1,"div",51),i.Rc(11,V,2,0,"div",65),i.Rc(12,E,3,1,"div",51),i.Rc(13,L,5,1,"div",51),i.Wb(),i.Wb()}if(2&e){const e=i.nc(2);i.Fb(6),i.wc("placeholder",i.qc(7,9,"CofaNet.company.customizedFields.placeholder",e.lang)),i.vc("form",e.form)("options",e.filters.customizedFields.notepadDefinitions),i.Fb(2),i.vc("ngIf",e.form.value&&e.form.value.customizedFields&&e.form.value.customizedFields&&"text"===e.form.value.customizedFields.type),i.Fb(1),i.vc("ngIf",e.form.value.customizedFields&&"date"===e.form.value.customizedFields.type),i.Fb(1),i.vc("ngIf",e.form.value.customizedFields&&"number"===e.form.value.customizedFields.type),i.Fb(1),i.vc("ngIf",e.form.value.customizedFields&&"date"===e.form.value.customizedFields.type||e.form.value.customizedFields&&"number"===e.form.value.customizedFields.type),i.Fb(1),i.vc("ngIf",e.form.value.customizedFields&&"date"===e.form.value.customizedFields.type),i.Fb(1),i.vc("ngIf",e.form.value.customizedFields&&"number"===e.form.value.customizedFields.type)}}function U(e,t){if(1&e){const e=i.Yb();i.Xb(0,"form",5),i.jc("submit",(function(){return i.Jc(e),i.nc().filterByParams()})),i.Rc(1,P,32,12,"div",6),i.Xb(2,"div",7),i.Xb(3,"div",8),i.Xb(4,"div",9),i.Xb(5,"label",10),i.Tc(6,"CofaNet.product.product"),i.Wb(),i.Wb(),i.Xb(7,"div",11),i.Tb(8,"cad-select",12,13),i.Wb(),i.Xb(10,"div",14),i.Xb(11,"label",15),i.Tc(12,"CofaNet.portfolio.risk.type.insurances "),i.Tb(13,"input",16),i.Tb(14,"span",17),i.Wb(),i.Wb(),i.Xb(15,"div",9),i.Xb(16,"label",15),i.Tc(17,"CofaNet.portfolio.risk.type.informations "),i.Tb(18,"input",18),i.Tb(19,"span",17),i.Wb(),i.Wb(),i.Wb(),i.Xb(20,"div",19),i.Xb(21,"div",9),i.Xb(22,"label",20),i.Tc(23,"CofaNet.product.decision.amount"),i.Wb(),i.Wb(),i.Xb(24,"div",21),i.Xb(25,"div",22),i.Tb(26,"input",23),i.Xb(27,"div",24),i.Tc(28),i.Wb(),i.Wb(),i.Wb(),i.Xb(29,"div",25),i.Tb(30,"i",26),i.Wb(),i.Xb(31,"div",21),i.Xb(32,"div",22),i.Tb(33,"input",27),i.Xb(34,"div",24),i.Tc(35),i.Wb(),i.Wb(),i.Wb(),i.Wb(),i.Xb(36,"div",19),i.Xb(37,"div",9),i.Xb(38,"label",28),i.Tc(39,"CofaNet.product.status"),i.Wb(),i.Wb(),i.Xb(40,"div",29),i.Tb(41,"cad-select",30,31),i.Wb(),i.Wb(),i.Xb(43,"div",19),i.Xb(44,"div",9),i.Xb(45,"label",15),i.Tc(46,"CofaNet.product.date"),i.Wb(),i.Wb(),i.Xb(47,"div",21),i.Xb(48,"div",32),i.Xb(49,"cad-date-format",33),i.jc("itemChange",(function(){return i.Jc(e),i.nc().updateMinAndMaxDate()})),i.Wb(),i.Wb(),i.Wb(),i.Xb(50,"div",25),i.Tb(51,"i",26),i.Wb(),i.Xb(52,"div",21),i.Xb(53,"div",34),i.Xb(54,"cad-date-format",35),i.jc("itemChange",(function(){return i.Jc(e),i.nc().updateMinAndMaxDate()})),i.Wb(),i.Wb(),i.Wb(),i.Wb(),i.Xb(55,"div",19),i.Xb(56,"div",9),i.Xb(57,"label",20),i.Tc(58,"CofaNet.product.decision.clauses"),i.Wb(),i.Wb(),i.Xb(59,"div",36),i.Xb(60,"label",37),i.Tc(61,"CofaNet.product.decision.clauses.GUARANTOR "),i.Xb(62,"input",38),i.jc("click",(function(){return i.Jc(e),i.nc().addDecisionClauses("GUARANTOR")})),i.Wb(),i.Tb(63,"span",17),i.Wb(),i.Wb(),i.Rc(64,A,5,0,"div",39),i.Xb(65,"div",40),i.Xb(66,"label",41),i.Tc(67,"CofaNet.product.decision.clauses.OTHER "),i.Xb(68,"input",42),i.jc("click",(function(){return i.Jc(e),i.nc().addDecisionClauses("OTHER")})),i.Wb(),i.Tb(69,"span",17),i.Wb(),i.Wb(),i.Wb(),i.Wb(),i.Rc(70,z,14,12,"div",6),i.Xb(71,"div",43),i.Xb(72,"div",44),i.Xb(73,"button",45),i.Tc(74,"CofaNet.global.search"),i.Wb(),i.Wb(),i.Wb(),i.Wb()}if(2&e){const e=i.nc();i.Kb("hide",!e.displayForm),i.vc("formGroup",e.form),i.Fb(1),i.vc("ngIf","company"===e.type),i.Fb(1),i.Kb("hide","product"!==e.type),i.Fb(6),i.vc("form",e.form)("multiple",!0)("options",e.filters.deliveryTypes)("concat",!0),i.Fb(20),i.Wc("",e.displayCurrencyMultiplicator," ",e.currency,""),i.Fb(7),i.Wc("",e.displayCurrencyMultiplicator," ",e.currency,""),i.Fb(6),i.vc("form",e.form)("options",e.filters.functionalStatuses)("multiple",!0)("concat",!0),i.Fb(8),i.vc("form",e.form)("maxDate",e.maxUpdateDateFrom||e.dateToday),i.Fb(5),i.vc("form",e.form)("minDate",e.minUpdateDateTo)("maxDate",e.dateToday),i.Fb(8),i.vc("checked",e.checkDecisionClauses("GUARANTOR")),i.Fb(2),i.vc("ngIf",e.canDisplayNonCancellableFilter),i.Fb(4),i.vc("checked",e.checkDecisionClauses("OTHER")),i.Fb(2),i.vc("ngIf","customizedFields"===e.type)}}const j=function(e){return{busy:e}};let G=(()=>{class e{constructor(e,t,o,a,n){this.portfolioService=e,this.authenticationService=t,this.apiService=o,this.contractsService=a,this.analyticsService=n,this.portfolioFilter=new i.q,this.canDisplayNonCancellableFilter=!1}ngOnInit(){this.user=this.authenticationService.currentUserValue,this.countries=this.authenticationService.countries,this.currencies=this.authenticationService.currencies,this.currency=this.user.currentContract.currencyCode,this.arrayClauses=[],this.dateToday=this.apiService.formatDateToObject(this.apiService.getDateToday()),this.busy=Object(s.a)([this.contractsService.hGetPreferencesContractByContractId(this.user.currentContract.contractId),this.portfolioService.hGetPortfolioFilters()]).subscribe(e=>{this.preferencesContract=e[0],this.filters=e[1],this.setFiltersForm()}),this.getCurrencyDefault(),this.headerHeight=87}ngOnChanges(e){if(e.parameters&&e.parameters.currentValue&&e.parameters.previousValue){if(c.a.size(e.parameters.currentValue)<=c.a.size(e.parameters.previousValue)){const t=[],o=e.parameters.currentValue.debtorIsoCountryCodes;c.a.each(e.parameters.previousValue,(e,a)=>{"deliveryTypeCodes"===a?this.childDeliveryTypeCodes.resetDropDownList():"functionalStatuses"===a?this.childFunctionalStatuses.resetDropDownList():"debtorIsoCountryCodes"!==a||o?"debtorIsoCountryCodes"!==a&&(t.push(this.getFieldForm(a,e)),this.addFieldForm(a)&&t.push(this.addFieldForm(a))):(this.childDebtorIsoCountryCodes.resetDropDownList(),this.form.controls[a].reset())}),c.a.each(t,e=>{this.form.controls[e].reset()})}e.parameters.currentValue.updateDateFrom===e.parameters.previousValue.updateDateFrom&&e.parameters.currentValue.updateDateTo===e.parameters.previousValue.updateDateTo||this.updateMinAndMaxDate()}}getFieldForm(e,t){if("legalId.name"===e&&"EasyNumber"===t)e="easyNumber";else if(-1!==c.a.indexOf(["amount.from","amount.to","updateDate.from","updateDate.to"],e)){const t=e.split(".");e=`${t[0]}${c.a.capitalize(t[1])}`}else e===u.a.PFNOTEPAD.VALUE.TEXT?e="pfNotepadText":e===u.a.PFNOTEPAD.VALUE.NUMBER_INTERVAL_FROM?e="pfNotepadAmountFrom":e===u.a.PFNOTEPAD.VALUE.NUMBER_INTERVAL_TO?e="pfNotepadAmountTo":e===u.a.PFNOTEPAD.VALUE.DATE_INTERVAL_FROM?e="pfNotepadDateFrom":e===u.a.PFNOTEPAD.VALUE.DATE_INTERVAL_TO&&(e="pfNotepadDateTo");return e}addFieldForm(e){return"pfNotepadAmountFrom"===e?e=u.a.PFNOTEPAD.VALUE.NUMBER_INTERVAL_FROM:"pfNotepadAmountTo"===e?e=u.a.PFNOTEPAD.VALUE.NUMBER_INTERVAL_TO:"pfNotepadDateFrom"===e?e=u.a.PFNOTEPAD.VALUE.DATE_INTERVAL_FROM:"pfNotepadDateTo"===e&&(e=u.a.PFNOTEPAD.VALUE.DATE_INTERVAL_TO),e}setFiltersForm(){const e="ALC"===this.preferencesContract.defaultSelectedCountry?"":this.preferencesContract.defaultSelectedCountry;this.form=new n.j({amountFrom:new n.g(""),amountTo:new n.g(""),"amount.from":new n.g(""),"amount.to":new n.g(""),businessName:new n.g(""),clauses:new n.g([]),CRScny:new n.g(""),customizedFields:new n.g(""),deliveryTypeCodes:new n.g(""),easyNumber:new n.g(""),functionalStatuses:new n.g(""),guaranteedProducts:new n.g,informationProducts:new n.g,debtorIsoCountryCodes:new n.g(e),"legalId.name":new n.g(""),"legalId.value":new n.g(""),legalId:new n.g(""),legalValue:new n.g(""),pfNotepadText:new n.g(""),"pfNotepad.identifier":new n.g(""),"pfNotepad.type":new n.g(""),"pfNotepad.value.dateInterval.from":new n.g(""),"pfNotepad.value.dateInterval.to":new n.g(""),"pfNotepad.value.numberInterval.from":new n.g(""),"pfNotepad.value.numberInterval.to":new n.g(""),"pfNotepad.value.text":new n.g(""),pfNotepadAmountFrom:new n.g(""),pfNotepadAmountTo:new n.g(""),pfNotepadDateFrom:new n.g,pfNotepadDateTo:new n.g,searchOnFavorite:new n.g(!1),"updateDate.from":new n.g(""),"updateDate.to":new n.g(""),updateDateFrom:new n.g,updateDateTo:new n.g,nonCancellable:new n.g(!1)}),this.getLegalIds(this.form.value.debtorIsoCountryCodes),this.setProductAmount()}disabledFieldSearch(e){"easyNumber"===e?this.form.get("easyNumber").valueChanges.subscribe(e=>{e?this.disableField(["businessName","CRScny","legalId","legalValue"]):this.activeField(["businessName","CRScny","legalId","legalValue"])}):"crsNumber"===e?this.form.get("CRScny").valueChanges.subscribe(e=>{e?this.disableField(["businessName","easyNumber","legalId","legalValue","searchOnFavorite"]):this.activeField(["businessName","easyNumber","legalId","legalValue","searchOnFavorite"])}):"legalValue"===e&&this.form.get("legalValue").valueChanges.subscribe(e=>{e?this.disableField(["businessName","CRScny","easyNumber","searchOnFavorite"]):this.activeField(["businessName","CRScny","easyNumber","searchOnFavorite"])})}disableField(e){c.a.each(e,e=>{this.form.controls[e].disable(),this.form.controls[e].patchValue("")})}activeField(e){c.a.each(e,e=>{this.form.controls[e].enable()})}setProductAmount(){this.form.get("amountFrom").valueChanges.subscribe(e=>{this.form.patchValue(e?{"amount.from":`${e}${this.displayCurrencyMultiplicator}`}:{"amount.from":null})}),this.form.get("updateDateFrom").valueChanges.subscribe(e=>{this.form.patchValue(e?{"updateDate.from":this.apiService.extractDate(e)}:{"updateDate.from":null})}),this.form.get("amountTo").valueChanges.subscribe(e=>{this.form.patchValue(e?{"amount.to":`${e}${this.displayCurrencyMultiplicator}`}:{"amount.to":null})}),this.form.get("updateDateTo").valueChanges.subscribe(e=>{this.form.patchValue(e?{"updateDate.to":this.apiService.extractDate(e)}:{"updateDate.to":null})})}sendGtmEvent(e){const t=new l.c(l.e.Navigation,l.d.portfolio_search,"portfolioRisk|"+e);this.analyticsService.triggerGtmTagEvent(t)}filterByParams(){this.checkEasyNumberAndIdenfier();const e=this.removeNullKey(this.form.value);delete Object.assign({},e,{crsNumber:e.CRScny}).CRScny,this.busy=this.portfolioService.hGetSearchPortfolio(e).subscribe(t=>{this.portfolioFilter.emit({filters:e,portfolio:t})}),this.displayForm=!1,window.scrollTo({left:0,top:this.positionYTable-this.headerHeight,behavior:"smooth"}),this.sendGtmEvent("AdvancedSearch")}removeNullKey(e){c.a.each(e,(t,o)=>{(c.a.isNil(t)||t&&0===t.length||!t)&&delete e[o]});const t=["customizedFields","pfNotepadText","pfNotepadAmountFrom","pfNotepadAmountTo","pfNotepadDateFrom","pfNotepadDateTo","easyNumber","legalId","legalValue","amountFrom","amountTo","updateDateFrom","updateDateTo"];return this.form.value.easyNumber&&t.push("debtorIsoCountryCodes"),!this.form.value["pfNotepad.identifier"]||this.form.value[u.a.PFNOTEPAD.VALUE.TEXT]||this.form.value.pfNotepadDateFrom||this.form.value.pfNotepadDateTo||this.form.value.pfNotepadAmountFrom||this.form.value.pfNotepadAmountTo||(t.push("pfNotepad.identifier"),t.push("pfNotepad.type"),t.push(u.a.PFNOTEPAD.VALUE.NUMBER_INTERVAL_FROM),t.push(u.a.PFNOTEPAD.VALUE.NUMBER_INTERVAL_TO),t.push("pfNotepadAmountFrom"),t.push("pfNotepadAmountTo"),t.push(u.a.PFNOTEPAD.VALUE.DATE_INTERVAL_FROM),t.push(u.a.PFNOTEPAD.VALUE.DATE_INTERVAL_TO),t.push("pfNotepadDateFrom"),t.push("pfNotepadDateTo")),e.CRScny&&delete Object.assign(e,e,{crsNumber:e.CRScny}).CRScny,c.a.each(t,t=>{delete e[t]}),e}checkEasyNumberAndIdenfier(){if(this.form.value.easyNumber){let e=this.form.value.easyNumber;e=e.split("_").join(""),e=("000000000000000"+e).slice(-14),this.form.patchValue({easyNumber:e,"legalId.name":"EasyNumber","legalId.value":e})}else if(this.form.value.legalValue){console.log(this.form.value.legalValue);let e=this.form.value.legalValue;e=e.split("_").join(""),this.form.patchValue({"legalId.name":this.form.value.legalId,"legalId.value":e})}}getLegalIds(e){this.legalIds=null,setTimeout(()=>{c.a.find(this.countries,{isoCountryCode:e})&&c.a.find(this.countries,{isoCountryCode:e}).legalIds?(this.legalIds=c.a.find(this.countries,{isoCountryCode:e}).legalIds,this.legalIds&&this.legalIds.length>0&&this.form.patchValue({legalId:this.legalIds[0].code}),this.displayForm&&this.getInputMask(this.form.value.legalId)):this.user.preferences.displayCRS&&this.displayForm&&this.apiService.setInputMaskLegalId(this.form.value.debtorIsoCountryCodes,"CRScny","crsNumber")})}getInputMask(e){this.apiService.setInputMaskLegalId(this.form.value.debtorIsoCountryCodes,e,"legalidentifier"),this.user.preferences.displayCRS&&this.apiService.setInputMaskLegalId(this.form.value.debtorIsoCountryCodes,"CRScny","crsNumber")}displayFilter(e){const t=document.querySelectorAll(".c-table")[0];this.positionYTable=t.offsetTop,this.displayForm=!(this.type===e||!this.type)||!this.displayForm,"company"===e&&(this.apiService.setInputMaskEasyNumber("easynumber"),this.getInputMask(this.form.value.legalId)),this.type=e}setCustomizedFields(e){const t=c.a.find(this.filters.customizedFields.notepadDefinitions,{identifier:e});t&&(this.form.patchValue({customizedFields:t}),this.form.patchValue({"pfNotepad.identifier":t.identifier,"pfNotepad.type":t.type}),this.form.get("pfNotepadText").valueChanges.subscribe(e=>{this.form.patchValue({"pfNotepad.value.text":e})}),this.form.get("pfNotepadAmountFrom").valueChanges.subscribe(e=>{this.form.patchValue({"pfNotepad.value.numberInterval.from":e})}),this.form.get("pfNotepadAmountTo").valueChanges.subscribe(e=>{this.form.patchValue({"pfNotepad.value.numberInterval.to":e})}),this.form.get("pfNotepadDateFrom").valueChanges.subscribe(e=>{e&&this.form.patchValue({"pfNotepad.value.dateInterval.from":this.apiService.extractDate(e)})}),this.form.get("pfNotepadDateTo").valueChanges.subscribe(e=>{e&&this.form.patchValue({"pfNotepad.value.dateInterval.to":this.apiService.extractDate(e)})}))}addDecisionClauses(e){const t=this.arrayClauses.indexOf(e,0);-1===t?this.arrayClauses.push(e):this.arrayClauses.splice(t,1),this.form.patchValue({clauses:this.arrayClauses})}checkDecisionClauses(e){return-1!==c.a.indexOf(this.arrayClauses,e)}getCurrencyDefault(){const e=c.a.findIndex(this.currencies,{currencyCode:this.currency});this.currencyMultiplicator=this.currencies[e].currencyMultiplyingFactor,this.displayCurrencyMultiplicator=c.a.repeat("0",this.currencyMultiplicator)}updateMinAndMaxDate(){this.minUpdateDateTo=this.form.value.updateDateFrom?this.form.value.updateDateFrom:null,this.maxUpdateDateFrom=this.form.value.updateDateTo?this.form.value.updateDateTo:this.dateToday}}return e.\u0275fac=function(t){return new(t||e)(i.Sb(p.a),i.Sb(b.a),i.Sb(f.a),i.Sb(m.a),i.Sb(h.a))},e.\u0275cmp=i.Mb({type:e,selectors:[["cad-portfolio-search"]],viewQuery:function(e,t){var o;1&e&&(i.ad(N,!0),i.ad(F,!0),i.ad(_,!0)),2&e&&(i.Fc(o=i.kc())&&(t.childDeliveryTypeCodes=o.first),i.Fc(o=i.kc())&&(t.childDebtorIsoCountryCodes=o.first),i.Fc(o=i.kc())&&(t.childFunctionalStatuses=o.first))},inputs:{displayCategories:"displayCategories",parameters:"parameters",canDisplayNonCancellableFilter:"canDisplayNonCancellableFilter"},outputs:{portfolioFilter:"portfolioFilter"},features:[i.Db],decls:3,vars:5,consts:[[1,"c-risk-portfolio-navigation",3,"ngBusy"],["id","riskPortfolioFilterButtons","class","c-risk-portfolio-navigation__filters-buttons-container",4,"ngIf"],["class","c-risk-portfolio-navigation__filters-container",3,"formGroup","hide","submit",4,"ngIf"],["id","riskPortfolioFilterButtons",1,"c-risk-portfolio-navigation__filters-buttons-container"],["l10nTranslate","",1,"c-button","c-button--navigation-tab",3,"click"],[1,"c-risk-portfolio-navigation__filters-container",3,"formGroup","submit"],["class","filterCompany",4,"ngIf"],[1,"filterCompany"],[1,"row"],[1,"col-1","align-self-center"],["for","company","l10nTranslate",""],["id","proudctInputSearchPortfolio",1,"col-4"],["name","deliveryTypeCodes","translate","BcProduct.deliveryType.","capliner","true","bindLabel","deliveryTypeCode","bindValue","deliveryTypeCode","placeholder","CofaNet.filter.products",3,"form","multiple","options","concat"],["childDeliveryTypeCodes",""],[1,"col-2","align-self-center"],["l10nTranslate","",1,"checkbox-container"],["id","insurancesCheckbox","type","checkbox","formControlName","guaranteedProducts"],[1,"checkmark"],["id","informationsCheckbox","type","checkbox","formControlName","informationProducts"],[1,"row","u-form-margin-top"],["l10nTranslate",""],[1,"col-3"],[1,"c-input-suffixed"],["type","text","numeric","","id","amountFrom","formControlName","amountFrom",1,"c-input-suffixed__input"],[1,"c-input-suffixed__suffix"],[1,"col-1","align-self-center","u-align-center"],[1,"las","la-arrow-right"],["type","text","numeric","","id","amount.to","formControlName","amountTo",1,"c-input-suffixed__input"],["for","country","l10nTranslate",""],["id","productStatus",1,"col-3"],["name","functionalStatuses","translate","CofaNet.product.status.","placeholder","CofaNet.product.request.status.ALL",3,"form","options","multiple","concat"],["childFunctionalStatuses",""],["id","updateDateFrom",1,"input-date"],["name","updateDateFrom",3,"form","maxDate","itemChange"],["id","updateDateTo",1,"input-date"],["name","updateDateTo",3,"form","minDate","maxDate","itemChange"],[1,"col-11","align-self-center"],["for","clauseGuarantor","l10nTranslate","",1,"checkbox-container"],["type","checkbox","id","clauseGuarantor",3,"checked","click"],["class","col-11 offset-1 align-self-center mt-4",4,"ngIf"],[1,"col-11","offset-1","align-self-center","mt-4"],["for","clauseOther","l10nTranslate","",1,"checkbox-container"],["type","checkbox","id","clauseOther",3,"checked","click"],[1,"row","u-margin-top-md"],[1,"col-11","u-align-right","btn-cont"],["id","searchFromPortfolio","type","submit","l10nTranslate","",1,"c-button","c-button--primary"],["id","company","type","text","formControlName","businessName"],["for","easynumber","l10nTranslate",""],["id","easynumber","type","text","formControlName","easyNumber",3,"keydown"],["type","checkbox","formControlName","searchOnFavorite"],["class","col-1 align-self-center",4,"ngIf"],["class","col-3",4,"ngIf"],["name","debtorIsoCountryCodes","bindLabel","label","bindValue","isoCountryCode",3,"form","options","search","placeholder","itemChange"],["childDebtorIsoCountryCodes",""],["for","CRScny","l10nTranslate",""],["id","crsNumber","type","text","formControlName","CRScny",3,"keydown"],["for","legalidentifier","l10nTranslate",""],["name","legalId","bindLabel","label","bindValue","code",3,"form","options","itemChange"],["type","text","id","legalidentifier","formControlName","legalValue",1,"c-input-prefixed__input",3,"keydown"],["for","nonCancellable","l10nTranslate","",1,"checkbox-container"],["type","checkbox","id","nonCancellable","formControlName","nonCancellable"],["for","customizedFields","l10nTranslate",""],["id","customizedFieldsDropdownContainer",1,"col-3"],["name","customizedFields","bindLabel","label","bindValue","identifier",3,"form","options","placeholder","itemChange"],["class","col-7",4,"ngIf"],["class","col-1 align-self-center u-align-center",4,"ngIf"],[1,"col-7"],["type","text","id","pfNotepadText","formControlName","pfNotepadText","maxlength","255",4,"ngIf"],["type","text","id","pfNotepadText","formControlName","pfNotepadText",4,"ngIf"],["type","text","id","pfNotepadText","formControlName","pfNotepadText","maxlength","255"],["type","text","id","pfNotepadText","formControlName","pfNotepadText"],[1,"input-date"],["name","pfNotepadDateFrom",3,"form"],["type","text","numeric","","id","pfNotepadAmountFrom","formControlName","pfNotepadAmountFrom",1,"c-input-suffixed__input"],["name","pfNotepadDateTo",3,"form"],["type","text","numeric","","id","pfNotepadAmountTo","formControlName","pfNotepadAmountTo",1,"c-input-suffixed__input"]],template:function(e,t){1&e&&(i.Xb(0,"div",0),i.Rc(1,I,10,18,"div",1),i.Rc(2,U,75,27,"form",2),i.Wb()),2&e&&(i.vc("ngBusy",i.zc(3,j,t.busy)),i.Fb(1),i.vc("ngIf",t.displayCategories),i.Fb(1),i.vc("ngIf",t.filters))},directives:[g.c,v.u,d.q,n.H,n.s,n.k,y.a,n.a,n.r,n.i,n.c,C.a,T.a,n.n],pipes:[d.r],styles:["[_ngcontent-%COMP%]:root{--font-main:#00335f;--primary:#03365f;--primary2:#00335f;--primary-light:#0e4676;--primary-dark:#5f6c83;--primary-darkest:#6a778e;--primary-highlighted-1:#365d7f;--primary-highlighted-2:#5e7d99;--primary-highlighted-3:#e9ebf5;--primary-highlighted-4:#edeef5;--primary-highlighted-5:#f4f5fb;--primary-modal:#cfd9e1;--primary-modal-border:#9fb2c3;--secondary-lightest-2:#cfe8d7;--secondary-lightest:#8ac597;--secondary-light:#60b47b;--secondary:#0bb18f;--secondary2:#60b47b;--secondary-dark:#9c0;--accent-light:#f7dcea;--accent:#e81f76;--accent-dark:red;--accent-darkest:#e13e3e;--warning:#ffa44c;--primary-ultra-light:#18b3b9;--white:#fff;--nav-bg-hover:#0e4676;--nav-bg-selected:#0e4676;--nav-color-actived:#fff;--risk:#023d70;--risk_dark:#285275;--risk_light:#d8e2ea;--overdue:#579d6d;--overdue_dark:#327949;--overdue_light:#c8f0d4;--information:#be126c;--information_dark:#ae487e;--information_light:#f7ddeb;--img-logo:url(/subscriberviewinterface/cofanet-logo-2.ddc4a65b9a40dcf48f9b.svg);--img-logo-footer:url(/subscriberviewinterface/footer-logo.e5150c0d7855798cfbbf.svg);--dra-score-default:#212529;--dra-score-very-high:#ed4447;--dra-score-high:#ffa44c;--dra-score-medium:#ddc853;--dra-score-average:#8ac597;--dra-score-moderate:#60b47b;--dra-score-low:#60b47b;--cra-score-good:#60b47b;--cra-score-correct:#ffa44c;--cra-score-bad:#ed4447}.btn-cont[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center}@media screen and (max-width:890px){.c-risk-portfolio-navigation__filters-buttons-container[_ngcontent-%COMP%]   .c-button--navigation-tab[_ngcontent-%COMP%]:after{display:none}.c-risk-portfolio-navigation__filters-buttons-container[_ngcontent-%COMP%]   .c-button--navigation-tab-active[_ngcontent-%COMP%]{background-color:#e1e4e4}.c-risk-portfolio-navigation__filters-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{-ms-flex-direction:column;flex-direction:column;gap:1rem}.c-risk-portfolio-navigation__filters-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-1[_ngcontent-%COMP%]{max-width:-moz-fit-content;max-width:fit-content}.c-risk-portfolio-navigation__filters-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .btn-cont[_ngcontent-%COMP%], .c-risk-portfolio-navigation__filters-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-3[_ngcontent-%COMP%], .c-risk-portfolio-navigation__filters-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .c-risk-portfolio-navigation__filters-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-11[_ngcontent-%COMP%]{max-width:96%}.c-risk-portfolio-navigation__filters-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .align-self-center[_ngcontent-%COMP%]{-ms-flex-item-align:start!important;align-self:flex-start!important}.c-risk-portfolio-navigation__filters-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .offset-1[_ngcontent-%COMP%]{margin-left:0}.c-risk-portfolio-navigation__filters-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]{padding-left:3.4rem}.c-risk-portfolio-navigation__filters-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .display__input[_ngcontent-%COMP%]{display:none}}"]}),Object(a.b)([Object(d.k)(),Object(a.c)("design:type",String)],e.prototype,"lang",void 0),e})()},ZUFH:function(e,t,o){"use strict";o.d(t,"a",(function(){return d}));var a=o("3Pt+"),i=o("SX+u"),n=o("fXoL"),r=o("ofXK"),c=o("1ATV");const s=function(){return{sizeMaxPortfolioRisk:100}};function l(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",1),n.Xb(1,"form",2),n.Xb(2,"div",3),n.Tb(3,"p",4),n.Xb(4,"div",5),n.Xb(5,"button",6),n.jc("click",(function(){return n.Jc(e),n.nc().hideMessage()})),n.oc(6,"translate"),n.Tc(7," CofaNet.onboarding.watch.validate "),n.Wb(),n.Tb(8,"span",7),n.Xb(9,"label",8),n.Xb(10,"span",9),n.Tc(11,"CofaNet.onboarding.watch.hidden"),n.Wb(),n.Tb(12,"input",10),n.Tb(13,"span",11),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Fb(1),n.vc("formGroup",e.form),n.Fb(2),n.vc("innerHTML",e.label,n.Kc)("params",n.yc(7,s)),n.Fb(2),n.Gb("arial-label",n.qc(6,4,"CofaNet.accessibility.iconPopin.close",e.lang))}}let d=(()=>{class e{constructor(e){this.localStorage=e,this.form=new a.j({understand:new a.g})}ngOnInit(){this.displayAlertMessage=!this.localStorage.get(this.localStorageProperty)}hideMessage(){this.form.value.understand&&this.localStorage.set(this.localStorageProperty,!0)}}return e.\u0275fac=function(t){return new(t||e)(n.Sb(i.a))},e.\u0275cmp=n.Mb({type:e,selectors:[["cad-popin-message"]],inputs:{localStorageProperty:"localStorageProperty",label:"label"},decls:1,vars:1,consts:[["class","alert c-risk-portfolio-popin","role","alert",4,"ngIf"],["role","alert",1,"alert","c-risk-portfolio-popin"],[3,"formGroup"],[1,"c-risk-portfolio-popin__visual-content"],["l10nTranslate","",1,"c-risk-portfolio-popin__text-content",3,"innerHTML","params"],[1,"c-risk-portfolio-popin__form-container"],["type","button","data-dismiss","alert","aria-label","Close","l10nTranslate","",1,"c-button","c-button--primary-light-inverted",3,"click"],[1,"u-separator"],[1,"checkbox-container"],["l10nTranslate",""],["type","checkbox","formControlName","understand"],[1,"checkmark"]],template:function(e,t){1&e&&n.Rc(0,l,14,8,"div",0),2&e&&n.vc("ngIf",t.displayAlertMessage)},directives:[r.u,a.H,a.s,a.k,c.q,a.a,a.r,a.i],pipes:[c.r],encapsulation:2}),e})()},tmoo:function(e,t,o){"use strict";o.d(t,"a",(function(){return d}));var a=o("3Pt+"),i=o("SX+u"),n=o("fXoL"),r=o("ofXK"),c=o("1ATV");const s=function(){return{sizeMaxPortfolioRisk:100}};function l(e,t){if(1&e){const e=n.Yb();n.Xb(0,"div",1),n.Xb(1,"form",2),n.Xb(2,"div",3),n.Tb(3,"p",4),n.Xb(4,"div",5),n.Xb(5,"button",6),n.jc("click",(function(){return n.Jc(e),n.nc().hideMessage()})),n.oc(6,"translate"),n.Tc(7," CofaNet.onboarding.watch.validate "),n.Wb(),n.Tb(8,"span",7),n.Xb(9,"label",8),n.Xb(10,"span",9),n.Tc(11,"CofaNet.onboarding.watch.hidden"),n.Wb(),n.Tb(12,"input",10),n.Tb(13,"span",11),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wb()}if(2&e){const e=n.nc();n.Fb(1),n.vc("formGroup",e.form),n.Fb(2),n.vc("innerHTML",e.label,n.Kc)("params",n.yc(7,s)),n.Fb(2),n.Gb("arial-label",n.qc(6,4,"CofaNet.accessibility.iconPopin.close",e.lang))}}let d=(()=>{class e{constructor(e){this.localStorage=e,this.form=new a.j({understand:new a.g})}ngOnChanges(e){e.list.currentValue&&(this.displayAlertMessage=!this.localStorage.get(this.localStorageProperty)&&100===this.list.length)}hideMessage(){this.form.value.understand&&this.localStorage.set(this.localStorageProperty,!0)}}return e.\u0275fac=function(t){return new(t||e)(n.Sb(i.a))},e.\u0275cmp=n.Mb({type:e,selectors:[["cad-popin-alert"]],inputs:{list:"list",localStorageProperty:"localStorageProperty",label:"label"},features:[n.Db],decls:1,vars:1,consts:[["class","alert c-risk-portfolio-popin","role","alert",4,"ngIf"],["role","alert",1,"alert","c-risk-portfolio-popin"],[3,"formGroup"],[1,"c-risk-portfolio-popin__visual-content"],["l10nTranslate","",1,"c-risk-portfolio-popin__text-content",3,"innerHTML","params"],[1,"c-risk-portfolio-popin__form-container"],["type","button","data-dismiss","alert","aria-label","Close","l10nTranslate","",1,"c-button","c-button--primary-light-inverted",3,"click"],[1,"u-separator"],[1,"checkbox-container"],["l10nTranslate",""],["type","checkbox","formControlName","understand"],[1,"checkmark"]],template:function(e,t){1&e&&n.Rc(0,l,14,8,"div",0),2&e&&n.vc("ngIf",t.displayAlertMessage)},directives:[r.u,a.H,a.s,a.k,c.q,a.a,a.r,a.i],pipes:[c.r],encapsulation:2}),e})()}}]);