import{L as k}from"./LegalNotice.114e7d53.js";import{U as I}from"./UserChoice.710c243f.js";import{_ as $,f as x,o as g,e as L,g as e,w as o,V as n,a as c,a3 as N,c as d,be as T,k as B,l as v,i as p,aZ as C,F as E,aX as P,p as j,n as D}from"./index.e75b56e2.js";import{V as R}from"./VContainer.bb5eda89.js";import{V as a}from"./VRow.2e303763.js";import{e as y,f as A}from"./VCard.4dab9e55.js";import{V as O}from"./VForm.ce8f4208.js";import{c as f}from"./VTextField.fd3313f9.js";import"./VDialog.922f860f.js";import"./dialog-transition.06875183.js";const m={name:"LoginView",components:{LegalNotice:k,UserChoice:I},data(){return{pictureLogo:this.$store.state.config.app.login.loginBoxLogo?this.$store.state.config.app.login.loginBoxLogo:this.$store.state.config.app.pictureLogo?this.$store.state.config.app.pictureLogo:null,urlSso:"",loginType:"normal",login:"",password:"",inputEyesPassword:!1,rules:{required:s=>!!s||"Requis."},isBtnCnxDisabled:!1,dShow:{active:!1,action:null,userChoiceValue:""},loginBoxBorder:this.$store.state.config.app.login&&this.$store.state.config.app.login.loginBoxBorder?this.$store.state.config.app.login.loginBoxBorder:null,loginBoxBorderRadius:this.$store.state.config.app.login&&this.$store.state.config.app.login.loginBoxBorderRadius?this.$store.state.config.app.login.loginBoxBorderRadius:"3px",loginImage:this.$store.state.config.app.login&&this.$store.state.config.app.login.loginImage?this.$store.state.config.app.login.loginImage:null,loginImageCover:this.$store.state.config.app.login&&this.$store.state.config.app.login.loginImageCover?this.$store.state.config.app.login.loginImageCover:"initial",loginImagePosition:this.$store.state.config.app.login&&this.$store.state.config.app.login.loginImagePosition?this.$store.state.config.app.login.loginImagePosition:"initial",loginBackground:this.$store.state.config.app.login&&this.$store.state.config.app.login.loginBackground?this.$store.state.config.app.login.loginBackground:"white",loginBoxBackground:this.$store.state.config.app.login&&this.$store.state.config.app.login.loginBoxBackground?this.$store.state.config.app.login.loginBoxBackground:"initial",loginBoxShadow:this.$store.state.config.app.login&&this.$store.state.config.app.login.loginBoxShadow?this.$store.state.config.app.login.loginBoxShadow:null}},mounted(){this.urlSso=this.$store.state.config.app.urlSso,this.urlSso==null&&(this.urlSso=""),this.urlSso!=""?this.loginType="sso":this.loginType="normal"},methods:{async authentification(){const s=await this.$refs.login.validate();this.isBtnCnxDisabled=!0,s.valid&&this.$ApiDw.authentification(this.login,this.password).then(t=>{t!=!1?this.$router.push({name:"home"}):this.isBtnCnxDisabled=!1})},connexionSSO(){this.urlSso!=null&&this.urlSso!=""?window.location.href=this.urlSso:this.$store.commit("notificationsAddItem",{title:"SSO",message:"SSO non configur\xE9",type:"error",progress:10})},isLegalNotice(){let s=this.$store.state.config.app.legalNotice;return s!=null&&s!=""},forbiddenPassword(s){if(this.dShow.active=!0,s){let t=this.$store.state.config.app.dwOrganization,h=s;this.$ApiDw.resetPassword(h,t).then(u=>{console.log(u),u&&u.data&&u.data.message&&this.$store.commit("notificationsAddItem",{title:"Mot de passe",message:u.data.message,type:"success",progress:10})})}}}},V=()=>{P(s=>({"778da528-loginImage":s.loginImage,"778da528-loginImageCover":s.loginImageCover,"778da528-loginImagePosition":s.loginImagePosition,"778da528-loginBackground":s.loginBackground,"778da528-loginBoxBackground":s.loginBoxBackground,"778da528-loginBoxBorderRadius":s.loginBoxBorderRadius,"778da528-loginBoxBorder":s.loginBoxBorder,"778da528-loginBoxShadow":s.loginBoxShadow}))},S=m.setup;m.setup=S?(s,t)=>(V(),S(s,t)):V;const U=m,_=s=>(j("data-v-778da528"),s=s(),D(),s),F=_(()=>p("span",{class:"loginTitle text-uppercase"},"connexion avec my account ou windows",-1)),q=_(()=>p("span",{class:"loginTitle"},"IDENTIFIEZ-VOUS",-1));function z(s,t,h,u,i,r){const w=x("LegalNotice"),b=x("UserChoice");return g(),L(E,null,[e(a,{fluid:"",class:"fill-height"},{default:o(()=>[e(n,{cols:"12",md:"12",class:"pb-0"},{default:o(()=>[e(R,{fluid:"",class:"fill-height login"},{default:o(()=>[e(a,{justify:"center",class:"fill-height align-center"},{default:o(()=>[c(" effect test : bounce / slide-fade "),e(N,{name:"bounce",mode:"out-in"},{default:o(()=>[s.$store.state.config.app?i.loginType=="sso"?(g(),d(n,{key:1,cols:"11",xs:"9",sm:"6",md:"5",lg:"3",class:"loginContainer text-center"},{default:o(()=>[e(a,{class:"justify-center"},{default:o(()=>[e(n,{cols:"4",class:"pa-0 mt-12"},{default:o(()=>[e(y,{src:i.pictureLogo},null,8,["src"])]),_:1})]),_:1}),e(a,{class:"justify-center"},{default:o(()=>[e(n,{cols:"10"},{default:o(()=>[e(a,{class:"justify-center"},{default:o(()=>[e(n,{cols:"12",class:"mt-10"},{default:o(()=>[F]),_:1}),e(n,{cols:"12",class:"mt-2"},{default:o(()=>[e(B,{class:"base-theme-bg base-theme-text rounded-0",onClick:t[0]||(t[0]=l=>r.connexionSSO())},{default:o(()=>[v("SE CONNECTER")]),_:1})]),_:1}),e(n,{cols:"12",class:"pa-0 mt-10 mb-10"},{default:o(()=>[p("span",{onClick:t[1]||(t[1]=l=>i.loginType="normal"),class:"text-caption text-grey-darken-3 text-decoration-underline text-uppercase font-weight-bold g-c-pointer"},"Connexion avec mes identifiants")]),_:1}),r.isLegalNotice()?(g(),d(n,{key:0,cols:"12",class:"mt-10"},{default:o(()=>[e(w)]),_:1})):c("v-if",!0)]),_:1})]),_:1})]),_:1})]),_:1})):(g(),d(n,{key:2,cols:"11",xs:"9",sm:"6",md:"5",lg:"3",class:"loginContainer text-center pa-6"},{default:o(()=>[e(a,{class:"justify-center"},{default:o(()=>[i.urlSso!=""?(g(),d(n,{key:0,cols:"12",class:"text-left"},{default:o(()=>[p("span",{onClick:t[2]||(t[2]=l=>i.loginType="sso"),class:"font-weight-bold text-h6 g-c-pointer",title:"Connexion avec mon compte windows"},"\u2190")]),_:1})):c("v-if",!0),e(n,{cols:"4",class:"pa-0"},{default:o(()=>[e(y,{src:i.pictureLogo},null,8,["src"])]),_:1})]),_:1}),e(a,{class:"justify-center"},{default:o(()=>[e(n,{cols:"10"},{default:o(()=>[e(a,{class:"justify-center"},{default:o(()=>[e(n,{cols:"12",class:"mt-8"},{default:o(()=>[q]),_:1}),e(n,{cols:"10"},{default:o(()=>[e(O,{ref:"login"},{default:o(()=>[e(f,{outline:"",modelValue:i.login,"onUpdate:modelValue":t[3]||(t[3]=l=>i.login=l),onKeyup:t[4]||(t[4]=C(l=>r.authentification(),["enter"])),variant:"underlined",name:"login",label:"Votre identifiant",hint:"Saisir vos identifiants","onClick:append":t[5]||(t[5]=l=>s.show1=!s.show1),rules:[i.rules.required]},null,8,["modelValue","rules"]),e(f,{modelValue:i.password,"onUpdate:modelValue":t[6]||(t[6]=l=>i.password=l),onKeyup:t[7]||(t[7]=C(l=>r.authentification(),["enter"])),variant:"underlined","append-inner-icon":i.inputEyesPassword?"mdi-eye":"mdi-eye-off",type:i.inputEyesPassword?"text":"password",name:"password",label:"Votre mot de passe","onClick:appendInner":t[8]||(t[8]=l=>i.inputEyesPassword=!i.inputEyesPassword),rules:[i.rules.required],autocomplete:"on"},null,8,["modelValue","append-inner-icon","type","rules"])]),_:1},512)]),_:1}),e(n,{cols:"12",class:"pa-0"},{default:o(()=>[e(B,{onClick:t[9]||(t[9]=l=>r.authentification()),disabled:i.isBtnCnxDisabled,class:"base-theme-bg base-theme-text rounded-0"},{default:o(()=>[v("SE CONNECTER")]),_:1},8,["disabled"])]),_:1}),e(n,{cols:"12",class:"pa-0 mb-8 mt-4"},{default:o(()=>[p("a",{onClick:t[10]||(t[10]=l=>r.forbiddenPassword()),class:"text-caption text-grey-darken-3 g-c-pointer text-decoration-underline"},"mot de passe oubli\xE9 ?")]),_:1}),i.urlSso!=""?(g(),d(n,{key:0,cols:"12",class:"pa-0 mt-2 mb-10"},{default:o(()=>[p("span",{onClick:t[11]||(t[11]=l=>i.loginType="sso"),title:"Connexion avec mon compte windows",class:"text-caption text-grey-darken-2 text-decoration-underline text-uppercase font-weight-bold g-c-pointer"}," Connexion avec mon compte windows ")]),_:1})):c("v-if",!0),r.isLegalNotice()?(g(),d(n,{key:1,cols:"12",class:"mt-10"},{default:o(()=>[e(w)]),_:1})):c("v-if",!0)]),_:1})]),_:1})]),_:1})]),_:1})):(g(),d(n,{key:0,cols:"11",xs:"9",sm:"6",md:"5",lg:"3",class:"loginContainer text-center"},{default:o(()=>[e(a,{class:"justify-center"},{default:o(()=>[e(n,{cols:"12",class:"mt-10 mb-10"},{default:o(()=>[e(T,{size:100,color:"primary",indeterminate:""})]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),c(" Dialog for nav Action"),e(n,null,{default:o(()=>[e(b,{active:i.dShow.active,title:"Mot de passe oubli\xE9",labelApprove:"Valider",labelCancel:"Annuler",onClose:t[13]||(t[13]=l=>i.dShow.active=!1),onApprove:t[14]||(t[14]=l=>{r.forbiddenPassword(i.dShow.userChoiceValue),i.dShow.active=!1,i.dShow.userChoiceValue=""})},{default:o(()=>[e(a,{class:"justify-center"},{default:o(()=>[e(n,{cols:"12"},{default:o(()=>[e(A,null,{default:o(()=>[e(f,{modelValue:i.dShow.userChoiceValue,"onUpdate:modelValue":t[12]||(t[12]=l=>i.dShow.userChoiceValue=l),label:"Votre identifiant",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["active"])]),_:1})],64)}const ee=$(U,[["render",z],["__scopeId","data-v-778da528"],["__file","C:/DEV/modules/integration/web/xd-portail/src/views/LoginView/LoginView1.vue"]]);export{ee as default};
